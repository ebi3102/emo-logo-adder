(()=>{clientLogoUploader.onclick=()=>{popupScreenLocker.style.display="block",popupUploadContainer.style.display="block"};let e=document.getElementsByClassName("close-icon");for(let t of e)t.onclick=()=>popupScreenLocker.style.display="none";function t(){var e=document.createElement("input");e.type="file",e.style.display="none",e.addEventListener("change",(function(){const t=e.files[0];o(uploadedLogoData,dropContainer,noticeContainer,t)})),document.body.appendChild(e),e.click()}function o(e,t,o,n){var a=document.createElement("img");a.src=e.loadingSrc,a.classList.add("loading-image");var r=t.innerHTML;t.innerHTML=a.outerHTML;var d=new FormData;d.append("action",e.action),d.append("nonce",e.nonce),d.append("logoImage",n),fetch(e.ajax_url,{method:"POST",credentials:"same-origin",body:d}).then((e=>e.text())).then((e=>{if(e)if(console.log(e),e=JSON.parse(e),a.remove(),t.innerHTML=r,e.error)o.innerHTML=e.error;else{popupUploadContainer.style.display="none",setCustomLogoContainer.style.display="block";var n=document.createElement("img");if(n.src=e.logSrc,n.classList.add("loaded-logo"),e.logoNOBGSrc){let t=document.createElement("div");t.appendChild(n);let o=document.createElement("div");o.classList.add("emo-btn","primary","set-to-editor"),o.setAttribute("logo-source",n.src),o.textContent="set with background",t.appendChild(o),CustomLogoParts.appendChild(t);let a=document.createElement("div");var d=document.createElement("img");d.src=e.logoNOBGSrc,d.classList.add("loaded-logo");let r=document.createElement("div");r.style.backgroundColor="#c9c9c942",r.appendChild(d),a.appendChild(r);let i=document.createElement("div");i.classList.add("emo-btn","primary","set-to-editor"),i.setAttribute("logo-source",d.src),i.textContent="set without background",a.appendChild(i),CustomLogoParts.appendChild(a)}else{var i=document.createElement("div");i.style.width="100%",i.appendChild(n);var l=document.createElement("div");l.classList.add("emo-btn","primary","set-to-editor"),l.setAttribute("logo-source",n.src),l.textContent="set",i.appendChild(l),CustomLogoParts.appendChild(i)}}})).catch((e=>{alert(e),a.remove(),t.innerHTML=r}))}dropContainer.onclick=t,UploadLogo.onclick=t,dropContainer.addEventListener("dragenter",(function(e){e.preventDefault(),e.target.classList.add("drag-over")})),dropContainer.addEventListener("dragover",(function(e){e.preventDefault(),e.target.classList.add("drag-over")})),dropContainer.addEventListener("dragleave",(function(e){e.target.classList.remove("drag-over")})),dropContainer.addEventListener("drop",(function(e){e.preventDefault(),e.stopPropagation(),e.target.classList.remove("drag-over");const t=e.dataTransfer.files[0];o(uploadedLogoData,dropContainer,noticeContainer,t)}))})();